<template>
    <div class="player">
        <div class="playerImg" :style="{backgroundImage: 'url(' + songMsg.singPic + ')'}"></div>
        <div class="header">
            <div class="backIcon" @click="goBack">
                <svg t="1589284598653" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21831" width="200" height="200"><path d="M762.450581 1003.982452c-10.074839 0-20.248774-3.600516-27.978323-10.735484L233.604129 529.044645a34.849032 34.849032 0 0 1 0-51.860645L734.472258 12.915613a41.752774 41.752774 0 0 1 55.923613 0 34.849032 34.849032 0 0 1 0 51.893677L317.44 503.114323l472.922839 438.238967a34.849032 34.849032 0 0 1 0 51.860645 41.125161 41.125161 0 0 1-27.945291 10.768517z" p-id="21832"></path></svg>
            </div>
            <div class="title">
                <div>{{songMsg.name}}</div>
                <div>&nbsp;{{songMsg.singer}}
                    <svg t="1589462378914" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="51499" width="200" height="200"><path d="M288 64c9 0 18.1 3.2 25 9.6l448 415.2c13.8 12.8 13.8 33.6 0 46.4L313 950.4c-13.8 12.8-36.2 12.8-50 0-13.8-12.8-13.8-33.6 0-46.4l423-392-423-392c-13.8-12.8-13.8-33.6 0-46.4 6.9-6.4 16-9.6 25-9.6z" p-id="51500"></path></svg>
                </div>
            </div>
            <svg t="1589460759387" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="50763" width="200" height="200"><path d="M512 939.804444c-57.612929 0-113.570909-11.274343-166.322424-33.616161-50.889697-21.514343-96.504242-52.337778-135.809293-91.539394C170.666667 775.447273 139.843232 729.729293 118.328889 678.839596 96.193939 626.191515 84.816162 570.233535 84.816162 512.620606s11.274343-113.570909 33.616161-166.322424c21.514343-50.889697 52.337778-96.504242 91.539394-135.809293 39.201616-39.201616 84.919596-70.025051 135.809293-91.539394 52.648081-22.238384 108.606061-33.616162 166.322424-33.616162h1.034344l-0.103435 57.923233h-0.930909c-98.676364 0-191.353535 38.374141-261.068282 108.192323-69.818182 69.818182-108.295758 162.495354-108.295758 261.171717s38.374141 191.353535 108.192323 261.068283c69.714747 69.818182 162.495354 108.192323 261.068283 108.192323 98.572929 0 191.250101-38.374141 261.068283-108.088889C842.78303 704.077576 881.260606 611.400404 881.260606 512.827475h57.923232c0 57.612929-11.377778 113.570909-33.616161 166.21899-21.514343 50.889697-52.337778 96.504242-91.539394 135.705858s-84.919596 69.921616-135.705859 91.43596c-52.751515 22.341818-108.606061 33.616162-166.322424 33.616161zM938.149495 352.711111h-57.923232V145.73899H672.530101v-57.923232H938.149495V352.711111z m0 0" p-id="50764"></path><path d="M888.371717 96.012929l40.96 40.96L560.484848 505.806869l-40.96-40.96L888.371717 96.012929z m0 0" p-id="50765"></path></svg>
        </div>
        <!-- 这里的旋转图用了计时器 -->
        <div :class="playStatus ? 'roll songPic' : 'songPic'" ref="songPic">
            <img :src="songMsg.singPic" alt="">
        </div>

        <ul class="iconList">
            <li v-for="(item, index) in iconList" :key="index" v-html="item.svg"></li>
        </ul>

        <div class="progressBar">
            <div class="currentTime">{{current}}</div>
            <div class="line" @touchstart="changeSpeed">
                <div class="bar" ref="bar" @touchmove="changeSpeed"></div>
            </div>
            <div class="durationTime">{{duration}}</div>
        </div>

        <ul class="controls">
            <li>
                <svg t="1589472196577" class="icon" viewBox="0 0 1293 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="59320" width="200" height="200"><path d="M1239.578947 565.894737c-32.336842 0-53.894737 21.557895-53.894736 53.894737v53.894737c0 118.568421-97.010526 215.578947-215.578948 215.578947H323.368421c-118.568421 0-215.578947-97.010526-215.578947-215.578947v-215.578948c0-118.568421 97.010526-215.578947 215.578947-215.578947h792.252632l-43.11579 43.115789c-16.168421 16.168421-16.168421 48.505263 0 64.673684s48.505263 16.168421 64.673684 0l129.347369-129.347368c16.168421-16.168421 16.168421-48.505263 0-64.673684L1137.178947 26.947368c-16.168421-16.168421-48.505263-16.168421-64.673684 0s-16.168421 48.505263 0 64.673685l43.11579 43.115789H323.368421c-177.852632 0-323.368421 145.515789-323.368421 323.368421v215.578948c0 177.852632 145.515789 323.368421 323.368421 323.368421h646.736842c177.852632 0 323.368421-145.515789 323.368421-323.368421v-53.894737c0-32.336842-21.557895-53.894737-53.894737-53.894737z" p-id="59321"></path></svg>
            </li>
            <li>
                <svg @touchend="playPrev" t="1589472262573" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="60291" width="200" height="200"><path d="M803.584 134.592c-18.176-10.048-39.936-10.112-58.112 0L192 443.008v-282.88c0-17.664-14.336-32-32-32s-32 14.336-32 32v344.896c-0.256 2.176-0.896 4.224-0.896 6.464s0.64 4.352 0.896 6.528v346.112c0 17.664 14.336 32 32 32s32-14.336 32-32v-284.16L745.408 888.32c9.152 5.12 19.072 7.68 29.12 7.68s19.968-2.56 29.056-7.616c18.176-10.112 28.992-28.224 28.992-48.576V183.104c0-20.224-10.816-38.336-28.992-48.512z m-35.392 694.656l-570.176-317.76L771.328 192l-3.136 637.248z" p-id="60292"></path></svg>
            </li>
            <li>
                <svg @touchend="play" v-show="!playStatus" t="1589472295064" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="61024" width="200" height="200"><path d="M515.939 33.51c-264.266-2.156-480.295 210.273-482.441 474.538-2.166 264.266 210.274 480.233 474.541 482.44 264.265 2.156 480.232-210.274 482.46-474.538 2.211-264.265-210.294-480.232-474.56-482.44zM944.643 515.588c-1.976 238.884-197.297 431.031-436.244 429.053-238.949-1.974-431.084-197.287-429.109-436.232 2.040-238.884 197.276-431.028 436.244-429.053 238.949 1.975 431.084 197.286 429.109 436.232zM699.281 498.651l-260.677-215.488c-12.382-10.292-31.179-1.552-31.307 14.612l-0.297 426.771c-0.107 16.048 15.271 25.084 27.844 15.027l264.202-211.231c9.452-7.602 9.579-21.97 0.233-29.691z" p-id="61025"></path></svg>
                <svg @touchend="play" v-show="playStatus" t="1589474651056" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="64723" width="200" height="200"><path d="M735.9 64.9c-51.2 0-96 44.7-96 95.8v702.6c0 51.1 44.8 95.8 96 95.8s96-44.7 96-95.8V160.7c0-51.1-44.8-95.8-96-95.8z m-447.8 0c-51.2 0-96 44.7-96 95.8v702.6c0 51.1 44.8 95.8 96 95.8s96-44.7 96-95.8V160.7c-0.1-51.1-44.9-95.8-96-95.8z" p-id="64724"></path></svg>
            </li>
            <li>
                <svg @touchend="playNext" t="1589472331462" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="61766" width="200" height="200"><path d="M881.777778 113.777778a28.444444 28.444444 0 0 0-28.444445 28.444444v739.555556a28.444444 28.444444 0 0 0 56.888889 0V142.222222a28.444444 28.444444 0 0 0-28.444444-28.444444z m-112.952889 447.032889a56.888889 56.888889 0 0 0 0-97.592889l-568.974222-341.333334A56.803556 56.803556 0 0 0 113.777778 170.666667v682.666666a56.803556 56.803556 0 0 0 86.072889 48.782223l568.974222-341.333334zM739.555556 512L170.609778 853.333333V170.666667l568.974222 341.333333z" p-id="61767"></path></svg>
            </li>
            <li>
                <svg t="1589472365545" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="62508" width="200" height="200"><path d="M352 224l-224 128V96l224 128zM128 768h768v64H128v-64z m0-288h768v64H128v-64z m352-288h416v64H480V192z" p-id="62509"></path></svg>
            </li>
        </ul>
    </div>
</template>
<style lang="scss" scoped>
    /* 防止背景太白看不清控件 */
    .player::after{
        content:'';
        background-color: rgba(106, 106, 109, 0.1);
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        z-index: -1;
    }
    .player{
        overflow: hidden;
        /* 背景 */
        .playerImg{
            background-size: cover;
            height: 100%;
            filter:blur(20px);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index:-1;
            background-color: rgba(0,0,0,0.7);
        }
        /* 头部控件 */
        .header{
            padding:10px 20px;
            display: flex;
            height: 30px;
            line-height: 30px;
            text-align: center;
            color:#fff;
            margin-bottom:100px;
            .backIcon{
                font-size: 15px;
                width:50px;
                display: flex;
                align-items: center;
            }
            .title{
                flex:1;
                div:first-child{
                    width:250px;
                    height: 20px;
                    line-height:20px;
                    font-size: 14px;
                    overflow: hidden;
                    white-space: nowrap;
                    text-overflow:ellipsis;
                }
                div:last-child{
                    color:#DBD6D2;
                    height: 15px;
                    line-height:20px;
                    svg{
                        font-size: 8px;
                    }
                    font-size: 10px;
                }
            }      
        }
        /* 唱片部分 */
        .songPic{
            width: 300px;
            height: 300px;
            background-size: contain;
            margin: 0 auto;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url('../assets/img/coverall.png');
            img{
                width: 200px;
                height: 200px;
                border-radius:50%;
            }
        }
        /* .roll{
                animation: rotate 10s linear infinite;
            }
        @keyframes rotate{
            0%{
                transform: rotate(0)
            }
            50%{
                transform:rotate(180deg)
            }
            100%{
                transform: rotate(360deg)
            }
        } */
        /* iconlist */
        .iconList{
            display:flex;
            margin-top:60px;
            li{
                width: 20%;
                text-align:center;
                font-size: 18px;
                color:#fff;
            }
        }
        /* 控制条 */
        .progressBar{
            margin-top:50px;
            padding:0 15px;
            font-size: 10px;
            color:#DBD6D2;
            display:flex;
            align-items:center;
            .currentTime{
                width: 50px;
                text-align:center;
            }
            .line{
                position: relative;
                flex:1;
                display: flex;
                align-items: center;
                height:2px;
                background: #fff;
                .bar{
                    position: absolute;
                    left:0%;
                    width: 16px;
                    height: 16px;
                    border-radius:50%;
                    background: #fff;
                    position: relative;
                }
            }
            .durationTime{
                width: 50px;
                text-align:center;
            }
        }
        /* 控制台 */
        .controls{
            margin-top:20px;
            display: flex;
            height: 100px;
            align-items: center;
            color:#fff;
            li{
                text-align: center;
                width: 20%;
                font-size: 20px;
            }
            li:nth-child(3){
                font-size: 30px;
            }
        }
    }
</style>
<script>
    //定时器
    let timer = null;
    //旋转初始角度
    let r = 0;
    
    export default {
       data() {
        return {
            //当前歌曲信息
            songMsg: {
                name:'',
                singer:'',
                singPic: ''
            },
            //icon选项列表
            iconList: [
                {
                    svg:'<svg t="1589471140068" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="53102" width="200" height="200"><path d="M734.31267555 35.67502222c-87.90926222 0-169.64721778 44.09912889-223.44704 116.81905778-53.76910222-72.73699555-135.48999111-116.81905778-223.44704-116.81905778-158.47082667 0-287.39811555 140.95701333-287.39811555 314.23260445 0 103.37052445 46.17671111 175.88679111 83.29557333 234.15125333 107.87953778 169.23648 379.12689778 379.84597333 390.61504 388.72519111 11.06716445 8.55608889 24.00711111 12.83640889 36.91747556 12.83640889 12.93994667 0 25.86168889-4.27918222 36.91747556-12.83640889 11.50293333-8.87921778 282.76508445-219.48871111 390.61390222-388.72519111 37.13706667-58.26446222 83.32856889-130.78072889 83.32856888-234.15125333-0.00113778-173.27445333-128.92842667-314.23260445-287.39811555-314.23260445zM885.90563555 544.06485333c-102.68899555 161.14232889-375.05706667 371.61415111-375.05706666 371.61415112s-272.33735111-210.47296-375.05820444-371.61415112c-37.88344889-59.49098667-71.80515555-116.03399111-71.80515556-194.15836444 0-134.90403555 100.02432-244.30933333 223.43224889-244.30933334 91.19857778 0 169.49134222 59.83345778 204.22428444 145.49333334v-0.42666667h0.09329778c2.58730667 8.93269333 10.13191111 15.44533333 19.11239111 15.44533333 9.01233778 0 16.55694222-6.51150222 19.12832-15.44533333h0.26396444c34.81258667-85.40387555 112.99612445-145.06552889 204.07068445-145.06552889 123.37834667 0 223.43224889 109.40529778 223.43224889 244.30933334 0 78.12323555-33.92398222 134.66624-71.83928889 194.15836444z" p-id="53103"></path></svg>',
                    name:'aixin',
                    path:''
                },
                {
                    svg:'<svg t="1589471302687" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="55660" width="200" height="200"><path d="M527.467 971.681c-263.712 0-477.515-213.777-477.515-477.515 0-263.735 213.803-477.515 477.515-477.515s477.515 213.778 477.515 477.515-213.801 477.515-477.515 477.515zM527.467 60.627c-239.435 0-433.537 194.103-433.537 433.539s194.101 433.54 433.537 433.54 433.539-194.103 433.539-433.539-194.102-433.54-433.539-433.54z" p-id="55661"></path><path d="M550.79 735.545c-24.788 24.765-34.371 9.813-44.185 0l-191.437-191.459c-32.689-32.689 6.267-60.517 32.343-34.417l159.093 166.971v-412.336c0-46.972 44.185-42.649 44.185 0v412.337l159.092-166.971c25.433-25.455 71.206-4.446 32.343 34.417l-191.436 191.458z" p-id="55662"></path></svg>',
                    name:'download',
                    path:''
                },
                {
                    svg:'<svg t="1589471335988" class="icon" viewBox="0 0 1116 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="56390" width="200" height="200"><path d="M284.823394 649.795357c7.948987 0 7.948987-12.326741 0-12.326741s-7.948987 12.326741 0 12.326741zM325.325544 648.914875c15.897974 0 15.897974-24.653482 0-24.653482s-15.897974 24.653482 0 24.653482z" p-id="56391"></path><path d="M18.917977 5.282889c3.407463 0 3.407463-5.282889 0-5.282889s-3.407463 5.282889 0 5.282889zM589.469998 664.323302c48.350762-0.188423 96.609954-10.058621 134.099095-42.340595 17.111278-14.732217 29.853606-33.541063 32.875419-56.171199 1.66411-12.462335 1.62713-25.415979 1.197455-37.962841-0.264144-7.718301 3.208475-17.016186 0.486026-26.005902-7.22347-23.846961-42.236698-15.690181-59.856895-11.761472-12.30561 2.74358-24.170979 6.702225-36.60866 9.009087-12.717675 2.35969-25.371955 4.576743-37.622975 8.840034-22.188134 7.721823-47.007147 22.568502-52.349909 47.216702-2.428368 11.205008-0.09157 23.40496-0.306407 34.775498-0.276471 14.642408-1.75568 29.217899-1.57254 43.877916 0.133833 10.757723 0.71319 21.497837 0.727277 32.267886 0.014088 10.016358 1.954669 19.939384 1.320723 29.95222-1.290786 20.421888 30.413592 20.295099 31.697334 0 0.697341-11.002497-1.310156-22.047257-1.326005-33.077929-0.01761-13.096282-0.93331-26.176715-0.686776-39.267715 0.234208-12.386614 1.364746-24.738009 1.598955-37.128144 0.172574-9.095374-3.21904-21.038225 1.304873-29.288337 4.094239-7.464722 13.337534-11.661097 20.494088-15.463017 10.236478-5.439615 22.073672-7.774652 33.349118-9.970572 11.051804-2.153658 22.142349-3.863553 33.003969-6.89241 10.328048-2.879175 20.444781-5.744261 31.135587-6.924106a77.795825 77.795825 0 0 1 11.963983-0.396217c-2.824585-0.123267-6.561348-3.669847-6.659962-6.700464 0.110941 3.396898 0.262383-0.010566-0.285276 3.537775-1.723983 11.162745-1.190411 22.057823-1.537321 33.322703-0.272949 8.845317-0.207794 17.972389-3.905816 26.224261-3.831856 8.552997-10.160757 15.299247-16.764368 21.783113-30.343154 29.791972-75.011742 36.684382-115.772753 36.844629-20.434215 0.082765-20.44302 31.7801 0.001761 31.699096zM561.36855 774.346511c-33.102583-22.406494-73.25254-30.77459-112.502645-23.498291-34.65223 6.422232-70.489589 29.515501-82.472942 63.787364-6.763859 19.34594 23.864571 27.590769 30.565035 8.426208 8.715006-24.928193 39.390982-37.765613 63.156939-42.171543 29.663422-5.497727 60.797248 4.272096 85.255264 20.82691 16.980966 11.492045 32.820829-15.984261 15.998349-27.370648z" p-id="56392"></path><path d="M367.991917 810.407512c-10.34918 18.511243-11.999202 39.73437-12.601451 60.527821-0.570552 19.669957 3.447966 38.385472 11.305382 56.382514 7.764086 17.782205 25.541008 32.454549 42.64172 40.810318 22.010277 10.75244 43.462328 16.419219 68.091157 14.380024 21.422115-1.775051 41.840482-8.271243 61.484024-16.706256 9.01437-3.870597 17.02323-9.10594 24.581283-15.325661 8.473754-6.973414 13.758404-17.06021 19.625933-26.125648 6.092932-9.412347 11.831911-18.921548 16.045895-29.344688 4.913087-12.155928 5.830549-24.829579 6.871278-37.788505 2.074414-25.796347 1.975801-51.721245 0.60401-77.54929-1.075948-20.281011-31.697334-20.561004-31.697334 0v8.364574c0 20.439498 31.697334 20.439498 31.697334 0v-8.364574h-31.697334c1.13406 21.330545 1.306635 42.659329 0.269427 63.998679-0.471938 9.683536-0.813565 19.673479-2.357929 29.254879-1.491536 9.260905-6.099976 17.500451-10.814074 25.449438-8.273004 13.948588-15.646156 27.379453-30.013854 35.580258-14.008461 7.996533-30.68302 12.641954-46.404898 15.691941-18.319298 3.553623-35.703525 1.834923-52.68097-5.636842-14.233864-6.267267-29.020671-14.446941-36.834063-28.52408-6.427515-11.583615-9.27147-26.243632-9.148203-39.401547 0.153204-16.479092 0.14616-34.909331 8.401554-49.671484 9.986421-17.863209-17.394793-33.840426-27.368887-16.001871z" p-id="56393"></path><path d="M606.199147 778.345658c0.271188-13.43967-1.57254-26.759594-1.820836-40.179894-0.246535-13.335773 1.02488-26.055209-1.385878-39.313499-1.547887-8.507212-11.733297-13.203701-19.495622-11.069414-8.875254 2.442456-12.613778 11.004258-11.069413 19.495622 2.023347 11.118721 0.107419 22.846734 0.315212 34.086961 0.228925 12.360199 2.012781 24.59361 1.760963 36.980224-0.415587 20.451825 31.281747 20.413083 31.695574 0z" p-id="56394"></path><path d="M543.610999 800.834917c9.76454 4.354862 16.975684 13.453758 20.451824 22.225114 3.180299 8.024709 10.481252 13.54885 19.495622 11.069414 7.647862-2.10259 14.256757-11.451543 11.069414-19.495622-6.695181-16.899962-17.86497-33.519931-35.018511-41.169555-7.890875-3.518404-16.966879-2.366734-21.684499 5.68615-4.002669 6.834298-2.208248 18.164334 5.68615 21.684499zM320.997097 654.601025c-16.133943-7.380196-25.637861-18.930353-37.688131-31.334576-11.685751-12.029138-25.282146-21.97858-36.962614-34.076396-11.00778-11.400475-20.657857-23.707845-27.317819-38.167112-6.439842-13.987329-2.497046-30.755219 0.255339-45.214487 5.973187-31.371556 54.892739-20.904392 76.517366-19.955233 18.444327 0.808282 36.120874-3.409224 53.454032-9.28908 17.671264-5.996079 32.917682-16.31004 50.132857-23.093269 8.029991-3.164451 13.545328-10.491818 11.069413-19.495622-2.107873-7.658428-11.44626-14.240908-19.495621-11.069413-18.217163 7.179446-34.525441 17.798053-53.114167 24.105823-9.593727 3.25426-19.423422 6.128151-29.545438 7.026242-10.086796 0.892808-20.395474-0.279993-30.443529-1.144626-35.42001-3.051749-79.30497 4.250965-89.139948 44.492492-4.263291 17.447622-6.994545 37.892402-2.428368 55.440399 4.969438 19.104688 17.287374 35.742267 29.973352 50.425176 12.884966 14.915357 28.185974 26.835316 42.453296 40.292595 7.25869 6.846624 13.089238 14.917118 20.546917 21.582363a102.988162 102.988162 0 0 0 25.732953 16.847133c7.855656 3.594126 16.998576 2.312144 21.682737-5.686149 4.037888-6.888887 2.174789-18.092134-5.682627-21.68626z" p-id="56395"></path><path d="M402.001396 453.044719c14.947054-9.685297 30.985905-17.489885 46.049183-26.979715 16.317083-10.278741 29.744426-23.540554 42.565998-37.804354 13.228354-14.716368 25.47233-30.302652 37.802594-45.767429 10.539364-13.219549 20.612072-27.298449 34.416261-37.371157 6.964609-5.080378 10.38616-13.65979 5.68615-21.682738-4.032605-6.885365-14.689954-10.78766-21.682738-5.68615-30.082531 21.946882-50.185685 55.317132-74.321445 83.20022-12.192908 14.085943-24.778511 27.534418-40.465169 37.742721-14.918879 9.70995-31.10389 17.294418-46.049183 26.977954-17.083102 11.071175-1.211543 38.522827 15.998349 27.370648z" p-id="56396"></path><path d="M567.34878 298.851274c8.678026-13.346339 22.528-22.58259 35.920124-30.674215 15.48767-9.357758 31.806514-17.387749 49.081562-22.804471 37.344743-11.706882 80.780657-20.353211 119.567628-12.025616 37.603604 8.072255 74.703574 29.443302 102.805022 55.229083 14.908313 13.680922 28.841052 28.411377 43.596161 42.263113 7.026242 6.596567 13.219549 13.42206 17.951257 21.850029 4.874346 8.676265 8.192 18.074525 13.423822 26.578215 10.687285 17.3719 38.114284 1.46336 27.370648-15.998349-5.221255-8.48432-8.836512-17.757551-13.423821-26.578215-5.147295-9.89309-12.893771-18.465458-20.78993-26.233066-15.811687-15.558108-31.621613-31.360991-47.966872-46.359113-32.176316-29.527828-74.909606-52.807759-117.774968-62.010552-44.208977-9.491591-93.572292 0.299364-136.088984 13.629854-19.698132 6.173936-38.484086 15.864516-56.113086 26.516581-17.378944 10.498862-33.768227 23.448984-44.929211 40.618373-11.178593 17.194043 16.276581 33.062081 27.370648 15.998349z" p-id="56397"></path><path d="M811.405929 221.64185c6.892409-7.639058 11.764994-18.703188 20.221138-24.764423 11.3001-8.098669 28.753004-9.081286 42.139846-8.674504 25.935463 0.788911 51.055601 16.297713 68.476808 34.581792 14.137011 14.839635 24.019536 35.272089 25.555095 55.801397 1.653544 22.112413-7.746476 40.426428-25.01624 53.890751-6.825493 5.32163-5.541751 16.870026 0 22.413538 6.667006 6.667006 15.607415 5.307543 22.415298 0 50.352977-39.25891 39.14973-109.464984 1.009032-152.825177-22.598439-25.69069-55.801396-42.159216-89.684086-45.381778-18.868719-1.796182-39.000048 2.481197-56.146545 10.132582-14.749826 6.580719-21.179102 21.103381-31.383883 32.414046-13.650985 15.130194 8.693874 37.619453 22.413537 22.411776z" p-id="56398"></path><path d="M948.391243 374.01622c9.431718 30.790439 0.85935 62.07923-6.367642 92.385403-7.749998 32.498573-17.676547 64.165971-27.118831 96.192606-4.582026 15.533455-8.213132 31.306401-13.210745 46.716588-4.825039 14.887181-10.11145 29.587701-13.457279 44.904557-7.413654 33.954889 1.021359 67.039862 3.650476 100.941923 0.667405 8.611109 6.703986 15.848667 15.848668 15.848667 8.133888 0 16.517833-7.225231 15.848667-15.848667-2.472392-31.882236-11.08174-63.665857-4.122415-95.544571 3.335264-15.274593 8.947453-30.00681 13.758404-44.849968 5.35861-16.523116 9.186944-33.519931 14.151099-50.168075 9.824413-32.949379 19.448076-65.629331 27.441087-99.082346 7.841568-32.826112 14.277888-66.837352 4.143546-99.925847-5.967904-19.483295-36.568158-11.168028-30.565035 8.42973z" p-id="56399"></path><path d="M893.23612 766.899398c0.339866 29.927567 9.917744 58.849623 9.681775 88.782473-0.100375 12.520447-2.609747 25.486418-9.243295 36.217727-4.094239 6.624743-9.968812 9.27147-16.743237 11.101111-16.977445 4.585548-39.681541 0.34691-58.536172-0.507158-28.610366-1.29783-53.881947-18.009369-81.192722-24.968695-19.819639-5.048681-28.222954 25.521637-8.426208 30.565036 14.954098 3.810724 29.040041 10.01988 43.386607 15.596849 15.704268 6.105259 31.519477 9.834979 48.38422 10.600998 22.644224 1.026641 46.091446 5.06453 68.26021-1.715178 27.076567-8.280048 40.445799-33.62735 44.318156-60.119278 5.231821-35.791574-7.785218-69.985954-8.188478-105.555646-0.235969-20.42541-31.933304-20.446542-31.700856 0.001761z" p-id="56400"></path></svg>',
                    name:'vip',
                    path:''
                },
                {
                    svg:'<svg t="1589471362734" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="57136" width="200" height="200"><path d="M909.73824 429.45536c-7.77344-69.8816-37.26464-130.55744-84.8256-181.89056C747.7824 164.32 650.42304 123.65568 538.496 116.15104c-48.33536-3.24224-96.24192 1.61024-143.13472 14.46784-83.65568 22.93888-155.61472 65.05472-209.81632 133.5168-72.10112 91.08608-92.3584 192.9408-55.08096 303.8848 23.02464 68.5376 67.31136 122.09664 125.0368 164.84224 4.64128 3.43808 6.5152 7.05408 6.46144 12.79744-0.25472 26.54848-0.1152 53.10208-0.1152 79.65184 0 26.55232-0.032 53.10464 0.05504 79.6544 0.00512 2.75456-1.33376 6.47424 1.67296 7.98464 2.50368 1.25824 4.8704-1.536 7.09376-2.88128 53.99808-32.70528 107.98208-65.44 161.91616-98.25408 3.40864-2.07616 6.5408-2.8928 10.64064-2.25792 19.84256 3.06688 39.81312 5.08032 59.8848 5.47072 33.55008 0.65408 66.8544-2.17728 99.68256-9.1456 95.95904-20.37376 177.5488-65.344 238.94272-143.072C895.74016 594.44096 919.40096 516.37248 909.73824 429.45536zM804.93568 626.85056c-45.98016 60.69504-107.36 98.97856-179.62624 120.68736-41.12256 12.35456-83.32288 17.33632-126.176 15.96672-21.15712-0.67456-42.25536-2.9248-62.9888-7.46112-5.87008-1.28512-10.5792-0.34304-15.7056 2.77632-33.92128 20.63616-68.00384 41.0048-102.06464 61.408-1.80608 1.0816-3.67232 3.4816-5.89824 2.01088-1.73824-1.14944-0.84608-4.96896-0.8576-6.92096-0.04736-9.81376-0.02432-17.8752-0.02432-30.6752l1.344 0c0-20.48-0.20864-44.70784 0.13312-67.66848 0.09344-6.1376-1.99936-8.98304-7.14496-12.25856-53.66272-34.08896-96.11904-78.18368-120.67456-137.41568-35.56096-85.75744-27.45472-168.4224 22.15936-246.48064 39.3408-61.89824 96.16384-102.59456 163.93856-128.7744 54.15296-20.91776 110.53568-28.37504 168.14848-24.43904 81.19296 5.54624 154.68928 32.29568 217.36576 85.21216 55.36 46.74432 91.6352 105.19168 101.23904 177.80096C867.69024 503.05664 848.9856 568.71936 804.93568 626.85056zM312.39424 414.46272c-27.5328 0.18304-50.78144 23.80032-50.41792 51.20512 0.3712 27.49312 23.12064 49.80608 50.77504 49.80224 27.6416-0.00256 50.40512-22.35264 50.74816-49.82784C363.84256 437.95072 340.20608 414.28096 312.39424 414.46272zM511.88096 414.46272c-27.52 0.17024-50.76992 23.776-50.42688 51.18848 0.34432 27.48032 23.10784 49.82272 50.75328 49.81888 27.65056 0 50.40896-22.33344 50.76224-49.80992C563.31904 437.96352 539.70048 414.29248 511.88096 414.46272zM711.4048 414.46272c-27.50848 0.13056-50.752 23.68-50.48064 51.13728 0.27392 27.43552 23.07456 49.85984 50.70336 49.87008 27.6736 0.01024 50.38848-22.2336 50.81344-49.75872C762.87232 438.0672 739.23072 414.3296 711.4048 414.46272z" p-id="57137"></path></svg>',
                    name:'pinglun',
                    path:''
                },
                {
                    svg:'<svg t="1589471381705" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="58002" width="200" height="200"><path d="M512.12288 0.43008c59.12064 0 108.38016 49.26464 108.38016 108.38528s-49.26464 108.3904-108.38016 108.3904c-59.12064 0-108.39552-49.27488-108.39552-108.3904C403.73248 49.69472 453.00736 0.43008 512.12288 0.43008z m0 400.71168c59.12064 0 108.38016 49.26464 108.38016 108.38528 0 59.13088-49.26464 108.3904-108.38016 108.3904-59.12064 0-108.39552-49.26464-108.39552-108.3904s49.28-108.38528 108.39552-108.38528z m0 400.71168c59.12064 0 108.38016 49.27488 108.38016 108.38528 0 59.13088-49.26464 108.39552-108.38016 108.39552-59.12064 0-108.39552-49.26976-108.39552-108.39552 0.00512-59.1104 49.28-108.38528 108.39552-108.38528z m0 0" p-id="58003"></path></svg>',
                    name:'sandian',
                    path:''
                },
            ]
        }
       },
       computed:{
           songlist() {
               return this.$store.state.songlist;
           },
           songId() {
               return this.$store.state.songId;
           },
           listIndex() {
               return this.$store.state.listIndex;
           },
           playStatus() {
               return this.$store.state.playStatus;
           },
           autoPlayNext() {
               return this.$store.state.autoPlayNext;
           },
           durationTime() {
               return this.$store.state.durationTime;
           },
           currentTime() {
                return this.$store.state.currentTime;
           },
           //歌曲总时间
           duration(){
                let min = parseInt(this.$store.state.durationTime / 60);
                let sec = parseInt(this.$store.state.durationTime % 60);
                if(sec <= 9){
                    sec = '0' + sec;
                }
                let time = min + ' : ' + sec;
                return time ;
           },
           //歌曲当前时间
           current() {
                let min = parseInt(this.$store.state.currentTime / 60);
                let sec = parseInt(this.$store.state.currentTime % 60);
                if(sec <= 9){
                    sec = '0' + sec;
                }
                let time = min + ' : ' + sec;
                return time ;
           }
       },
       methods: {
            //思路：通过store中的歌单列表，获得songlist中的歌曲索引（listIndex）并找到对应的songId进行更改并保存, 
            // 在songAudio中通过监听更改的songId来发送请求获得歌曲
            // 上一曲 
            playPrev() {
                //判断歌曲在歌单索引是否为0，为负数切到歌单最后一首
                if(this.listIndex == 0){
                    this.$store.commit('setListIndex', this.songlist.length)
                }
                this.$store.commit('setSongId', this.songlist[this.listIndex - 1].id);
                this.$store.commit('setListIndex', this.listIndex - 1)
                this.$store.commit('setPlayStatus', true)
            },
            //播放，暂停
            play(){
                this.$store.commit('setPlayStatus', !this.playStatus)
                console.log(this.playStatus)
            },
            // 下一曲
            playNext(){
                // 判断当前歌曲是否歌单列表的最后一个，如果是将索引清空到-1，再加一播放第一首。
                if(this.listIndex == this.songlist.length - 1){
                    this.$store.commit('setListIndex', -1)
                }
                this.$store.commit('setSongId', this.songlist[this.listIndex + 1].id);
                this.$store.commit('setListIndex', this.listIndex + 1)
                this.$store.commit('setPlayStatus', true)
            },
            //返回上一页
            goBack(){
                this.$router.go(-1);
                clearInterval(timer);
            },
            //获取歌曲信息
            getSongMsg(){
                this.$http.get(this.$store.state.Host + '/song/detail?ids=' + this.songId)
                .then(({data}) => {
                    this.songMsg.name = data.songs[0].name;
                    this.songMsg.singer = data.songs[0].ar[0].name;
                    this.songMsg.singPic = data.songs[0].al.picUrl;
                    this.$store.commit('setSongPic', data.songs[0].al.picUrl);
                    window.sessionStorage.setItem('picUrl', data.songs[0].al.picUrl)
                })
            },
            //图片旋转
            getRotatePic() {
                if(this.playStatus){
                    timer = setInterval(() => {
                        this.$refs.songPic.style.transform = "rotate(" + (r += 10) + "deg)";
                        this.$refs.songPic.style.transition = "all .5s linear";
                        // console.log(this.$refs.songPic)
                    },500)
                }
            },
            //点击按钮变大
            changeBig() {

            },
            //小圆点事件
            changeSpeed(e) {
                if(e.touches[0].clientX >= 70 && e.touches[0].clientX <= 300){
                    let percent = (e.touches[0].clientX - 70) / (300 - 70);
                    let newTime = this.durationTime * percent;
                    // console.log((e.touches[0].clientX - 70) / (310 - 70))
                    this.$store.commit('setNewTime', newTime);
                    // console.log(111,this.currentTime)

                }

                // console.log(this.$refs.bar.style.left)
                // console.log(e.touches[0].clientX)
                // e.touches[0].clientX
                // this.$refs.bar.style.left
                // this.store.commit
            },
       },
       watch: {
           //自动播放一下曲 监听当前播放状态
           autoPlayNext() {
               this.$store.commit('setPlayStatus', true);
            //    this.playNext();
           },
           //监听songId改变时获取歌的信息
           songId() {
                this.getSongMsg();
           },
           //监听播放状态旋转图片
           playStatus() {
            if(this.playStatus){
                clearInterval(timer)
                    this.getRotatePic();
                } else{
                    clearInterval(timer)
                }   
           },
            //监听当前歌曲播放时间改变小圆点位置
           currentTime() {
               //计算当前播放时间占总共的百分之几
               let percent = (this.currentTime / this.durationTime) * 100;
            //    console.log(percent) 
               this.$refs.bar.style.left = percent + '%';
            //    console.log(222,this.currentTime)

            //    this.$refs.bar.style.transition = "all .1s linear"
           }

       },
       created() {
            // console.log(this.songId)
            // console.log(this.playStatus)
            this.getSongMsg();
            //页面载入图片旋转
            clearInterval(timer);
            r = 0;
            this.getRotatePic();    
       }
    }
</script>